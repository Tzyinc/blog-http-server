(this.webpackJsonpatva=this.webpackJsonpatva||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},228:function(e,t,n){},229:function(e,t,n){},230:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){},233:function(e,t,n){},234:function(e,t,n){},235:function(e,t,n){},236:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(93),c=n.n(o),s=n(19),r=(n(103),n(2)),l=n(3),d=n(5),u=n(4),m=n(6),h=(n(104),function(e){function t(){return Object(r.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"header-text"},i.a.createElement("img",{src:"./Logo.png",alt:"",className:"header-logo"}),i.a.createElement("span",{style:{verticalAlign:"middle"}},"ATVA")),i.a.createElement("a",{href:"/",className:"header-button"},i.a.createElement("strong",{className:"header-plus-sign"},"+")," New Meeting"))}}]),t}(a.Component)),f=n(44),g=n(34),p=n(21),v=n(43),b=n(17),S=n(16),E=n.n(S);function y(e){var t={};if("string"!==typeof e||0===e.length)return t;0===e.indexOf("?")&&(e=e.substr(1));for(var n=e.split("&"),a=0;a<n.length;a++){var i=n[a].split("="),o=i[0],c=i[1];c&&c.replace(/\+/g,"%20"),c=decodeURIComponent(c),t[o]=c}return t}var O=n(94),j=n(24),w=n(33),R=n.n(w),N={},T="";function x(e){return console.log("createDocument"),N[e]={title:e,doc_hash:e},T=e,new Promise((function(t,n){t(N[e])}))}n(222);var k=function(e,t){return function(n){function o(e){var t;return Object(r.a)(this,o),(t=Object(d.a)(this,Object(u.a)(o).call(this,e))).showToast=function(){t.setState({isActive:!0},(function(){window.setTimeout((function(){t.setState({isActive:!1})}),3e3)}))},t.state={isActive:!1},t}return Object(m.a)(o,n),Object(l.a)(o,[{key:"render",value:function(){return i.a.createElement(a.Fragment,null,i.a.createElement("div",{className:E()("toast",{"toast--active":this.state.isActive})},t),i.a.createElement(e,Object.assign({},this.props,{showToast:this.showToast})))}}]),o}(i.a.Component)},C=(n(223),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).getDocumentUrl=function(){return window.location.href},n.getUrlBoxRef=function(e){e&&(n.urlBoxRef=e)},n.handleChangeTitle=function(e){var t=e.target.value;n.props.onChangeDocumentTitle(t)},n.handleCopyButton=function(){n.urlBoxRef&&(n.urlBoxRef.select(),document.execCommand("copy"),n.props.showToast())},n.handleStartRecording=function(){var e=n.props,t=e.documentId,a=e.documentTitle;t?n.props.onStartRecording():a?x(a).then((function(e){console.log("Start Recording...");var t=e&&e.doc_hash;t?(n.props.setDocumentId(t),n.props.onStartRecording()):alert("Document cannot be created")})):alert("Please write the document's name before starting!")},n.handleRecordNext=function(){console.log("Recording Next Section..."),n.props.handleRecordNext()},n.handleStopRecording=function(){console.log("Stop Recording..."),n.props.onStopRecording()},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.documentTitle,n=e.isRecording;return i.a.createElement("div",{className:"sidebar-container"},i.a.createElement("div",{className:"sidebar"},i.a.createElement("div",null,i.a.createElement("div",{className:"sidebar-section"},i.a.createElement("div",{className:"sidebar-label"},"Meeting Title"),i.a.createElement("input",{type:"text",className:"sidebar-input-box",value:t,placeholder:"Type meeting topic here",onChange:this.handleChangeTitle})),i.a.createElement("div",{className:"sidebar-section"},i.a.createElement("div",{className:"sidebar-label"},"Share"),i.a.createElement("div",{className:"sidebar-url-container"},i.a.createElement("input",{type:"text",className:"sidebar-link-box",readOnly:!0,value:this.getDocumentUrl(),ref:this.getUrlBoxRef,onClick:this.handleCopyButton})))),i.a.createElement("div",{className:"sidebar-buttons"},i.a.createElement("div",{className:"sidebar-section"},i.a.createElement("button",{className:"button sidebar-start-button",onClick:n?this.handleRecordNext:this.handleStartRecording},n?"Record Next Section":"Start Recording")),i.a.createElement("div",{className:"sidebar-section"},i.a.createElement("button",{className:E()("button-red sidebar-start-button",{"button-disabled":!n}),onClick:this.handleStopRecording,disabled:!n},"Stop Recording")))))}}]),t}(a.Component)),I=k(Object(b.e)(C),"Url Copied to Clipboard!"),A=(n(228),function(e){function t(){return Object(r.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.isEditable,a=e.onEdit;return i.a.createElement("div",{className:E()("section-content",this.props.className,{"section-content--editable":n})},i.a.createElement("div",{className:"section-content__text"},t.content),n&&i.a.createElement("span",{className:"section-content__edit",onClick:a},"Edit"))}}]),t}(a.Component)),_=(n(229),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(d.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).getTextAreaRef=function(e){e&&(n.textAreaRef=e)},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.textAreaRef&&(this.textAreaRef.addEventListener("blur",this.props.onBlur),this.textAreaRef.focus())}},{key:"componentWillUnmount",value:function(){this.textAreaRef&&this.textAreaRef.removeEventListener("blur",this.props.onBlur)}},{key:"render",value:function(){var e=this.props,t=e.text,n=e.onChangeText;return i.a.createElement("div",{className:"section-text-area"},i.a.createElement("textarea",{value:t,onChange:n,className:"section-text-area__box",ref:this.getTextAreaRef}))}}]),t}(i.a.Component)),D=(n(230),k(function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).setTags=function(e){var t=(e||n.props).section,a="";t.tags&&(a=t.tags.join(" #")),n.setState({tags:a?"#"+a:""})},n.handleChangeTags=function(e){n.setState({tags:n.state.tags})},n.handleSaveClick=function(){var e=n.props,t=e.section,a=e.onSaveClick,i=n.state.tags.replace(/#/g,"").split(" ");a(t.sectionId,i),n.props.showToast()},n.state={tags:""},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.setTags()}},{key:"componentWillReceiveProps",value:function(e){e.section.tags!==this.props.section.tags&&this.setTags(e)}},{key:"render",value:function(){return i.a.createElement("div",{className:"section-tags"},i.a.createElement("div",{className:"section-tags__wrapper"},i.a.createElement("div",{className:"section-tags__content"},i.a.createElement("input",{type:"text",name:"tags",onChange:this.handleChangeTags,value:this.state.tags}))))}}]),t}(a.Component),"Tags are saved successfully!")),P=n(97),M=n.n(P),U=(n(231),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).activateEditMode=function(){n.setState({editMode:!0})},n.deactivateEditMode=function(){n.setState({editMode:!1})},n.handleEditSection=function(e){var t=n.props.section,a=e.target.value;n.props.editSection(t.sectionId,a)},n.handleSaveEditedSection=function(){var e=n.props.section;n.deactivateEditMode(),n.props.saveSection(e.sectionId)},n.state={editMode:!1},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.section,n=(e.deleteSection,e.onSaveTagsClick),a=e.showRaw,o=this.state.editMode,c={content:t.text,timestamp:t.timestamp},s={content:t.summary,timestamp:t.timestamp},r=M()(c.timestamp).format("h:mm:ss a");return i.a.createElement("div",{className:"section"},i.a.createElement("div",{className:"section__header"},i.a.createElement("div",{className:"section__header-time"},r)),o&&i.a.createElement(_,{text:t.text,onChangeText:this.handleEditSection,onBlur:this.handleSaveEditedSection}),!o&&i.a.createElement(A,{data:c,className:a?"":"hidden",isEditable:!0,onEdit:this.activateEditMode}),i.a.createElement(A,{data:s,className:a?"hidden":""}),i.a.createElement(D,{section:t,onSaveClick:n}))}}]),t}(a.Component)),B=(n(232),function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).toggleDetail=function(){var e=n.state.showRaw;n.setState({showRaw:!e})},n.handleChangeFilter=function(e){var t=e.target.value;n.setState({filterText:t})},n.state={showRaw:!0,filterText:""},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.sections,n=e.deleteSection,a=e.editSection,o=e.saveSection,c=e.onSaveTagsClick,s=this.state,r=s.showRaw,l=s.filterText;return i.a.createElement("div",{className:"sections-container"},i.a.createElement("div",{className:"sections-container__header"},i.a.createElement("input",{type:"text",className:"sections-container__header-input",placeholder:"Filter ...",onChange:this.handleChangeFilter}),i.a.createElement("div",null,i.a.createElement("button",{className:E()("button sections-container__header-toggle",{"button-disabled":r}),onClick:this.toggleDetail,disabled:r},"Original Text"),i.a.createElement("button",{className:E()("button sections-container__header-toggle",{"button-disabled":!r}),onClick:this.toggleDetail,disabled:!r},"Summary"))),t&&t.length>0&&t.filter((function(e){var t=!0;if(l.length>0)for(var n in t=!1,e.tags)-1!==e.tags[n].indexOf(l)&&(t=!0);return t})).map((function(e){return i.a.createElement(U,{section:e,deleteSection:n,editSection:a,saveSection:o,key:e.sectionId,onSaveTagsClick:c,showRaw:r})})))}}]),t}(a.Component)),F=function(e){return function(t){function n(e){var t;return Object(r.a)(this,n),(t=Object(d.a)(this,Object(u.a)(n).call(this,e))).init=function(){t.recognition=new(window.SpeechRecognition||window.webkitSpeechRecognition),t.recognition.continuous=!1,t.recognition.interimResults=!1,t.recognition.lang="en-GB",t.recognition.maxAlternatives=1,t.recognition.onspeechend=function(){t.recognition.stop()},t.recognition.onend=function(){t.setState({isPlaying:!1}),t.state.UIStop||t.state.isPlaying||t.recognition.start()},t.recognition.onerror=function(e){console.error(e)},t.recognition.onstart=function(){t.setState({isPlaying:!0})},t.recognition.onresult=function(e){t.setState({currentText:e.results[0][0].transcript+". "})}},t.startRecord=function(){t.setState({UIStop:!1}),t.state.isPlaying||(t.setState({isPlaying:!0}),t.recognition.start())},t.stopRecord=function(){t.setState({UIStop:!0}),t.recognition.stop()},t.state={currentText:"",UIStop:!1,isPlaying:!1},t.init(),t}return Object(m.a)(n,t),Object(l.a)(n,[{key:"render",value:function(){return i.a.createElement(a.Fragment,null,i.a.createElement(e,Object.assign({},this.props,{startRecord:this.startRecord,stopRecord:this.stopRecord,lastRecordedTranscript:this.state.currentText})))}}]),n}(i.a.Component)},W=(n(233),function(e){function t(e){var n;Object(r.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).editSection=function(e,t){if(e&&t){var a=n.state.sections.findIndex((function(t){return t.sectionId===e})),i=n.state.sections.slice(0,a),o=n.state.sections.slice(a+1,n.state.sections.length);n.setState({sections:[].concat(Object(p.a)(i),[Object(g.a)({},n.state.sections[a],{text:t})],Object(p.a)(o))})}},n.saveSection=function(e){var t=n.state.sections.find((function(t){return t.sectionId===e}));t&&function(e,t){var n=N[T];if(n&&n.sections){if(!n.sections[e]){var a={timestamp:(new Date).getTime(),id:n.sections.length};n.sections.push(a)}if(n.sections[e].text=t,t){var i=new O.SummarizerManager(t,1).getSummaryByFrequency().summary;n.sections[e].summary=0===Object.keys(i).length&&i.constructor===Object?"":i}var o=R.a.pack(N);return window.history.pushState("","","?d=".concat(o)),new Promise((function(t,a){t(n.sections[e])}))}return new Promise((function(e,t){t({Error:"something wrong setText"})}))}(e,t.text).then((function(t){var a=t&&t.summary;a&&n.setSectionSummary(e,a)})),n.setAllTags()},n.getDocumentIdFromUrl=function(e){return y((e||n.props).location.search).id},n.setDocumentId=function(e){n.setState({documentId:e})},n.setSectionSummary=function(e,t){var a=n.state.sections,i=a.findIndex((function(t){return t.sectionId===e})),o=a.slice(0,i),c=a.slice(i+1,a.length);n.setState({sections:[].concat(Object(p.a)(o),[Object(g.a)({},a[i],{summary:t})],Object(p.a)(c))})},n.setAllTags=function(){(function(e){var t=N[e],n=new j.TfIdf,a=t.sections,i=!0,o=!1,c=void 0;try{for(var s,r=a[Symbol.iterator]();!(i=(s=r.next()).done);i=!0){var l=s.value;n.addDocument(l.text||"")}}catch(h){o=!0,c=h}finally{try{i||null==r.return||r.return()}finally{if(o)throw c}}for(var d in a){var u=n.listTerms(d).sort((function(e,t){return t.tfidf-e.tfidf})).map((function(e){return e.term})).slice(0,5);a[d].tags=u}var m=R.a.pack(N);return window.history.pushState("","","?d=".concat(m)),new Promise((function(e,n){e(t)}))})(n.state.documentId).then((function(e){var t=n.state.sections;n.setState({sections:t.map((function(t,n){var a=e.sections[t.sectionId]?e.sections[t.sectionId].tags:[];return a?Object(g.a)({},t,{tags:a}):t}))})}))},n.handleStartRecording=function(){n.setState({isRecording:!0}),n.createSection(),n.props.startRecord()},n.handleRecordNext=function(){n.saveSection(n.state.currentSectionId),n.handleStartRecording()},n.handleStopRecording=function(){n.saveSection(n.state.currentSectionId),n.props.stopRecord(),n.setState({isRecording:!1},n.setAllTags)},n.handleChangeDocTitle=function(e){n.setState({documentTitle:e})},n.handleSaveTagsClick=function(e,t){n.state.sections.find((function(t){return t.sectionId===e}))&&t&&function(e,t){var n=N[T];n&&n.sections&&n.sections[e]&&n.sections[e].tags?(n.sections[e].tags=t,new Promise((function(e,t){e()}))):new Promise((function(e,t){t({Error:"something wrong setTags"})}))}(e,t)};var a,i=y(e.location.search),o={sections:[],currentSectionId:0,lastRecordedTranscript:"",documentId:i.id||null,documentTitle:"",isRecording:!1};if(i&&i.d){var c=R.a.unpack(i.d),s=Object.keys(c),l=c[s[0]];o.sections=JSON.parse(JSON.stringify(l.sections)),o.sections.shift(),o.currentSectionId=l.sections.length,o.documentId=l.title,o.documentTitle=l.title,a=Object(f.a)({},s[0],l),N=a,T=Object.keys(a)[0]}return n.deleteSection=n.deleteSection.bind(Object(v.a)(n)),n.state=o,n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"deleteSection",value:function(e){var t=this.state.sections,n=t.find((function(t){return t.sectionId===e}));e&&n&&(!function(e){var t=N[T];t&&t.sections&&t.sections[e]?(t.sections=t.sections.filter((function(t){return t.id!==e})),new Promise((function(e,t){e()}))):new Promise((function(e,t){t({Error:"something wrong deleteSection"})}))}(e),this.setState({sections:t.filter((function(t){return t.sectionId!==e}))}))}},{key:"componentWillReceiveProps",value:function(e){var t=this.getDocumentIdFromUrl(e);e.documentId!==t&&this.setDocumentId(t),e.lastRecordedTranscript!==this.state.lastRecordedTranscript&&(this.setState({lastRecordedTranscript:e.lastRecordedTranscript}),0===this.state.sections.length?this.createSection():this.updateSectionText(this.state.currentSectionId,e.lastRecordedTranscript))}},{key:"componentDidMount",value:function(){var e,t=this,n=this.state.documentId;n&&(e=n,console.log("getDocument"),T=e,new Promise((function(t,n){t(N[e])}))).then((function(e){var n=e&&e.sections,a=e&&e.title;n&&a&&t.setState({documentTitle:a,sections:n.map((function(e){return{sectionId:e.id,summary:e.summary,text:e.text,timestamp:e.timestamp,tags:e.tags}}))})}))}},{key:"createSection",value:function(){var e=this,t=this.state.documentId;t&&function(e){T=e;var t=N[e],n={timestamp:(new Date).getTime()};return t&&t.sections?(n.id=t.sections.length,t.sections.push(n)):(t||(N[e]={title:e,doc_hash:e}),t=N[e],n.id=0,t.sections=[n]),new Promise((function(e,t){e(n)}))}(t).then((function(t){var n=t&&t.id,a=t&&t.timestamp;n&&e.setState({sections:[].concat(Object(p.a)(e.state.sections),[{text:"",sectionId:n,timestamp:a}]),currentSectionId:n})}))}},{key:"updateSectionText",value:function(e,t){if(e&&t){var n=Array.from(this.state.sections),a=n[n.length-1];a.sectionId===e&&this.setState({sections:[].concat(Object(p.a)(n.slice(0,-1)),[Object(g.a)({},a,{text:"".concat(a.text).concat(t)})])})}}},{key:"render",value:function(){var e=this.state,t=e.documentId,n=e.documentTitle,a=e.isRecording,o=e.sections;return i.a.createElement("div",{className:"main-body"},i.a.createElement(I,{onChangeDocumentTitle:this.handleChangeDocTitle,documentId:t,documentTitle:n,isRecording:a,onStartRecording:this.handleStartRecording,onStopRecording:this.handleStopRecording,handleRecordNext:this.handleRecordNext,setDocumentId:this.setDocumentId}),i.a.createElement(B,{sections:o,deleteSection:this.deleteSection,editSection:this.editSection,saveSection:this.saveSection,onSaveTagsClick:this.handleSaveTagsClick}))}}]),t}(a.Component)),L=F(Object(b.e)(W)),J=n(10),V=(n(234),function(e){function t(){return Object(r.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement("div",{className:"landing-cover landing-cover-bg"},i.a.createElement("h1",{className:"landing-cover-header"},"Meet ATVA. Built by Aaron Tenzy Van Adriel"),i.a.createElement("p",{className:"landing-cover-subtitle"},"Focus on what's important, and let us handle your minutes for you"),i.a.createElement(s.b,{to:"/",className:"button landing-enter-button"},"Take Me There")),i.a.createElement("div",{className:"landing-cover"},i.a.createElement("div",{className:"landing-details-component"},i.a.createElement("div",{className:"landing-details-component-sections"},i.a.createElement("div",{alt:"",className:"emoji thinking"})),i.a.createElement("div",{className:"landing-details-component-sections"},i.a.createElement("h1",null,"Remember everything"),i.a.createElement("div",null,"Have everything in your discussions saved quickly and effortlessly. Get all your information in one place, and skim through all the information with a summarised version of the texts."))),i.a.createElement("div",{className:"landing-details-component"},i.a.createElement("div",{className:"landing-details-component-sections"},i.a.createElement("h1",null,"Focus on the important"),i.a.createElement("div",null,"Spend less time talking and more time coming up with solutions. With our one-click interface you can keep the minutes at the back of your mind, instead of worrying about it all the time.")),i.a.createElement("div",{className:"landing-details-component-sections"},i.a.createElement("div",{alt:"",className:"emoji arrow"}))),i.a.createElement("div",{className:"landing-details-component"},i.a.createElement("div",{className:"landing-details-component-sections"},i.a.createElement("div",{alt:"",className:"emoji magni"})),i.a.createElement("div",{className:"landing-details-component-sections"},i.a.createElement("h1",null,"Find what you need fast"),i.a.createElement("div",null,'"Sorting is just a lousier search." With our automated tagging system you now have an easy way to go back to a long conversation and pick up only the parts that are relevant to what you need.')))))}}]),t}(a.Component)),q=(n(235),Object(J.a)({basename:"/atva"}),function(e){function t(){return Object(r.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(b.a,{exact:!0,path:"./",component:z}),i.a.createElement(b.a,{path:"./landing",component:V}))}}]),t}(a.Component)),z=function(e){function t(){return Object(r.a)(this,t),Object(d.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return i.a.createElement("div",null,i.a.createElement(h,null),i.a.createElement(L,null))}}]),t}(a.Component),G=q,H=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Q(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(i.a.createElement(s.a,null,i.a.createElement(G,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/atva",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/atva","/service-worker.js");H?(!function(e){fetch(e).then((function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Q(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):Q(e)}))}}()},90:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=90},98:function(e,t,n){e.exports=n(236)}},[[98,1,2]]]);
//# sourceMappingURL=main.0707a61f.chunk.js.map