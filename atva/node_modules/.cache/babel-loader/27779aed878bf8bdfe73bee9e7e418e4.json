{"ast":null,"code":"/*\nCopyright (c) 2018, Hugo W.L. ter Doest\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n*/\n\n/*\n * Spec for the Dutch Porter Stemmer can be found at:\n * http://snowball.tartarus.org/algorithms/dutch/stemmer.html\n */\n'use strict';\n\nvar Stemmer = require('./stemmer_nl');\n\nconst DEBUG = false;\nconst vowels = \"aeiouèy\";\n\nfunction isVowel(x) {\n  return vowels.indexOf(x) > -1;\n} // * Return longest matching suffixes for a token or '' if no suffix match\n\n\nString.prototype.endsinArr = function (suffixes) {\n  var i,\n      longest = '';\n\n  for (i = 0; i < suffixes.length; i++) {\n    if (this.endsin(suffixes[i]) && suffixes[i].length > longest.length) longest = suffixes[i];\n  }\n\n  if (DEBUG && longest != \"\") {\n    console.log(\"Matched suffix: \" + longest);\n  }\n\n  return longest;\n}; // Returns true if token has suffix\n\n\nString.prototype.endsin = function (suffix) {\n  if (this.length < suffix.length) return false;\n  return this.slice(-suffix.length) == suffix;\n}; // Removes a suffix of len characters and returns the string\n\n\nString.prototype.removeSuffix = function (len) {\n  return this.substr(0, this.length - len);\n}; // Define undoubling the ending as removing the last letter if the word ends kk, dd or tt.\n\n\nString.prototype.undoubleEnding = function () {\n  if (this.substr(-2) == \"kk\" || this.substr(-2) == \"tt\" || this.substr(-2) == \"dd\") {\n    return this.substr(0, this.length - 1);\n  } else {\n    return this;\n  }\n};\n\nclass PorterStemmer extends Stemmer {\n  constructor() {\n    super();\n  }\n\n  replaceAccentedCharacters(word) {\n    var accentedCharactersMapping = {\n      \"ä\": \"a\",\n      \"ë\": \"e\",\n      \"ï\": \"i\",\n      \"ö\": \"o\",\n      \"ü\": \"u\",\n      \"á\": \"a\",\n      \"é\": \"e\",\n      \"í\": \"i\",\n      \"ó\": \"o\",\n      \"ú\": \"u\"\n    };\n    var result = word;\n\n    for (var x in accentedCharactersMapping) {\n      result = result.replace(new RegExp(x, \"g\"), accentedCharactersMapping[x]);\n    }\n\n    if (DEBUG) {\n      console.log(\"replaceAccentedCharacters: \" + result);\n    }\n\n    return result;\n  } //Put initial y, y after a vowel, and i between vowels into upper case.\n\n\n  handleYI(word) {\n    // Initial y\n    var result = word.replace(/^y/, \"Y\");\n\n    if (DEBUG) {\n      console.log(\"handleYI: initial y: \" + result);\n    } // y after vowel\n\n\n    result = result.replace(/([aeioué])y/g, \"$1Y\");\n\n    if (DEBUG) {\n      console.log(\"handleYI: y after vowel: \" + result);\n    } // i between vowels\n\n\n    var result = result.replace(/([aeioué])i([aeioué])/g, \"$1I$2\");\n\n    if (DEBUG) {\n      console.log(\"handleYI: i between vowels:\" + result);\n    }\n\n    return result;\n  } // Determines R1 and R2; adapted from the French Porter Stemmer\n\n\n  markRegions(token) {\n    var r1, r2, len;\n    r1 = r2 = len = token.length; // R1 is the region after the first non-vowel following a vowel,\n\n    for (var i = 0; i < len - 1 && r1 == len; i++) {\n      if (isVowel(token[i]) && !isVowel(token[i + 1])) {\n        r1 = i + 2;\n      }\n    } // Or is the null region at the end of the word if there is no such non-vowel.\n    // R1 is adjusted such that the region before it contains at least 3 characters\n\n\n    if (r1 != len) {\n      // R1 is not null\n      if (r1 < 3) {\n        // Region before does not contain at least 3 characters\n        if (len > 3) {\n          r1 = 3; // Now R1 contains at least 3 characters\n        } else {\n          // It is not possible to make the region before long enough\n          r1 = len;\n        }\n      }\n    } // R2 is the region after the first non-vowel following a vowel in R1\n\n\n    for (i = r1; i < len - 1 && r2 == len; i++) {\n      if (isVowel(token[i]) && !isVowel(token[i + 1])) {\n        r2 = i + 2;\n      }\n    } // Or is the null region at the end of the word if there is no such non-vowel.\n\n\n    if (DEBUG) {\n      console.log(\"Regions r1 = \" + r1 + \" r2 = \" + r2);\n    }\n\n    this.r1 = r1;\n    this.r2 = r2;\n  }\n\n  prelude(word) {\n    var result = this.replaceAccentedCharacters(word);\n    result = this.handleYI(result);\n    this.markRegions(result);\n\n    if (DEBUG) {\n      console.log(\"Prelude: \" + result);\n    }\n\n    return result;\n  } // (1b) en   ene => delete if in R1 and preceded by a valid en-ending, and then undouble the ending\n  // Define a valid en-ending as a non-vowel, and not gem.\n  // Define undoubling the ending as removing the last letter if the word ends kk, dd or tt.\n\n\n  step1b(word, suffixes) {\n    var result = word;\n    var match = result.endsinArr(suffixes);\n\n    if (match != \"\") {\n      var pos = result.length - match.length;\n\n      if (pos >= this.r1) {\n        // check the character before the matched en/ene AND check for gem\n        if (!isVowel(result[pos - 1]) && result.substr(pos - 3, 3) !== \"gem\") {\n          // delete\n          result = result.removeSuffix(match.length); // Undouble the ending\n\n          result = result.undoubleEnding();\n        }\n      }\n    }\n\n    if (DEBUG) {\n      console.log(\"step 1b: \" + result);\n    }\n\n    return result;\n  }\n\n  step1(word) {\n    var result = word; // (1a) heden => replace with heid if in R1\n\n    if (result.endsin(\"heden\") && result.length - 5 >= this.r1) {\n      result = result.removeSuffix(5);\n      result += \"heid\";\n    }\n\n    if (DEBUG) {\n      console.log(\"step 1a: \" + result);\n    }\n\n    result = this.step1b(result, [\"en\", \"ene\"]); // (1c) s   se => delete if in R1 and preceded by a valid s-ending\n    // Define a valid s-ending as a non-vowel other than j.\n\n    var match = result.endsinArr([\"se\", \"s\"]);\n\n    if (match != \"\") {\n      var pos = result.length - match.length;\n\n      if (pos >= this.r1) {\n        // check the character before the matched s/se\n        // HtD: if there is a s before the s/se the suffix should stay\n        //if (!isVowel(result[pos - 1]) && result[pos - 1] != \"j\") {\n        if (!isVowel(result[pos - 1]) && !result.match(/[js]se?$/)) {\n          result = result.removeSuffix(match.length);\n        }\n      }\n    }\n\n    if (DEBUG) {\n      console.log(\"step 1c: \" + result);\n    }\n\n    return result;\n  } // Delete suffix e if in R1 and preceded by a non-vowel, and then undouble the ending\n\n\n  step2(word) {\n    var result = word;\n\n    if (result.endsin(\"e\") && this.r1 < result.length) {\n      if (result.length > 1 && !isVowel(result[result.length - 2])) {\n        // Delete\n        result = result.removeSuffix(1);\n        this.suffixeRemoved = true; // Undouble the ending\n\n        result = result.undoubleEnding();\n      }\n    }\n\n    if (DEBUG) {\n      console.log(\"step2: \" + result);\n    }\n\n    return result;\n  } // Step 3a: heid => delete heid if in R2 and not preceded by c, and treat a preceding en as in step 1(b)\n\n\n  step3a(word) {\n    var result = word;\n\n    if (result.endsin(\"heid\") && result.length - 4 >= this.r2 && result[result.length - 5] != \"c\") {\n      // Delete\n      result = result.removeSuffix(4); // Treat a preceding en as in step 1b\n\n      result = this.step1b(result, [\"en\"]);\n    }\n\n    if (DEBUG) {\n      console.log(\"step 3a: \" + result);\n    }\n\n    return result;\n  } // d suffixes: Search for the longest among the following suffixes, and perform the action indicated.\n\n\n  step3b(word) {\n    var result = word; // end   ing => delete if in R2; if preceded by ig, delete if in R2 and not preceded by e, otherwise undouble the ending\n\n    var suf = \"\";\n\n    if (suf = result.endsinArr([\"end\", \"ing\"])) {\n      if (result.length - 3 >= this.r2) {\n        // Delete suffix\n        result = result.removeSuffix(3); //this.regions(result);\n\n        if (result.endsin(\"ig\") && result.length - 2 >= this.r2 && result[result.length - 3] != \"e\") {\n          // Delete suffix\n          result = result.removeSuffix(2);\n        } else {\n          result = result.undoubleEnding();\n        }\n      }\n    } // ig => delete if in R2 and not preceded by e\n\n\n    if (result.endsin(\"ig\") && this.r2 <= result.length - 2 && result[result.length - 3] != \"e\") {\n      result = result.removeSuffix(2);\n    } // lijk => delete if in R2, and then repeat step 2\n\n\n    if (result.endsin(\"lijk\") && this.r2 <= result.length - 4) {\n      result = result.removeSuffix(4); // repeat step 2\n\n      result = this.step2(result);\n    } // baar => delete if in R2\n\n\n    if (result.endsin(\"baar\") && this.r2 <= result.length - 4) {\n      result = result.removeSuffix(4);\n    } // bar => delete if in R2 and if step 2 actually removed an e\n\n\n    if (result.endsin(\"bar\") && this.r2 <= result.length - 3 && this.suffixeRemoved) {\n      result = result.removeSuffix(3);\n    }\n\n    if (DEBUG) {\n      console.log(\"step 3b: \" + result);\n    }\n\n    return result;\n  } // undouble vowel => If the words ends CVD, where C is a non-vowel,\n  // D is a non-vowel other than I, and V is double a, e, o or u,\n  // remove one of the vowels from V (for example, maan -> man, brood -> brod)\n\n\n  step4(word) {\n    var result = word;\n\n    if (result.match(/[bcdfghjklmnpqrstvwxz](aa|ee|oo|uu)[bcdfghjklmnpqrstvwxz]$/)) {\n      result = result.substr(0, result.length - 2) + result[result.length - 1];\n    }\n\n    if (DEBUG) {\n      console.log(\"step4: \" + result);\n    }\n\n    return result;\n  } // Turn I and Y back into lower case.\n\n\n  postlude(word) {\n    return word.toLowerCase();\n  }\n\n  stem(word) {\n    return this.postlude(this.step4(this.step3b(this.step3a(this.step2(this.step1(this.prelude(word)))))));\n  }\n\n}\n\nmodule.exports = new PorterStemmer();","map":{"version":3,"sources":["/Users/tenzy/Documents/work/vata-hackathon-fe/atva/node_modules/natural/lib/natural/stemmers/porter_stemmer_nl.js"],"names":["Stemmer","require","DEBUG","vowels","isVowel","x","indexOf","String","prototype","endsinArr","suffixes","i","longest","length","endsin","console","log","suffix","slice","removeSuffix","len","substr","undoubleEnding","PorterStemmer","constructor","replaceAccentedCharacters","word","accentedCharactersMapping","result","replace","RegExp","handleYI","markRegions","token","r1","r2","prelude","step1b","match","pos","step1","step2","suffixeRemoved","step3a","step3b","suf","step4","postlude","toLowerCase","stem","module","exports"],"mappings":"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","sourcesContent":["/*\nCopyright (c) 2018, Hugo W.L. ter Doest\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n*/\n\n/*\n * Spec for the Dutch Porter Stemmer can be found at:\n * http://snowball.tartarus.org/algorithms/dutch/stemmer.html\n */\n'use strict'\n\nvar Stemmer = require('./stemmer_nl');\n\nconst DEBUG = false;\nconst vowels = \"aeiouèy\";\n\n\nfunction isVowel(x) {\n    return vowels.indexOf(x) > -1;\n}\n\n\n// * Return longest matching suffixes for a token or '' if no suffix match\nString.prototype.endsinArr = function(suffixes) {\n  var i, longest = '';\n  for (i = 0; i < suffixes.length; i++) {\n    if (this.endsin(suffixes[i]) && suffixes[i].length > longest.length)\n      longest = suffixes[i];\n  }\n\n  if (DEBUG && longest != \"\") {\n    console.log(\"Matched suffix: \" + longest);\n  }\n  return longest;\n};\n  \n\n// Returns true if token has suffix\nString.prototype.endsin = function(suffix) {\n  if (this.length < suffix.length) return false;\n  return (this.slice(-suffix.length) == suffix);\n};\n\n\n// Removes a suffix of len characters and returns the string\nString.prototype.removeSuffix = function(len) {\n  return this.substr(0, this.length - len);\n};\n\n\n// Define undoubling the ending as removing the last letter if the word ends kk, dd or tt.\nString.prototype.undoubleEnding = function() {\n  if (this.substr(-2) == \"kk\" || this.substr(-2) == \"tt\" || this.substr(-2) == \"dd\") {\n      return this.substr(0, this.length - 1);\n  }\n  else {\n    return this;\n  }\n}\n\n\nclass PorterStemmer extends Stemmer {\n  constructor() {\n    super();\n  }\n\n\n  replaceAccentedCharacters(word) {\n    var accentedCharactersMapping = {\n      \"ä\": \"a\",\n      \"ë\": \"e\",\n      \"ï\": \"i\",\n      \"ö\": \"o\",\n      \"ü\": \"u\",\n      \"á\": \"a\",\n      \"é\": \"e\",\n      \"í\": \"i\",\n      \"ó\": \"o\",\n      \"ú\": \"u\"\n    }\n    var result = word;\n    for (var x in accentedCharactersMapping) {\n      result = result.replace(new RegExp(x, \"g\"), accentedCharactersMapping[x]);\n    }\n    if (DEBUG) {\n      console.log(\"replaceAccentedCharacters: \" + result);\n    }\n    return result;\n  }\n\n\n  //Put initial y, y after a vowel, and i between vowels into upper case.\n  handleYI(word) {\n    // Initial y\n    var result = word.replace(/^y/, \"Y\");\n    if (DEBUG) {\n      console.log(\"handleYI: initial y: \" + result);\n    }\n    // y after vowel\n   result = result.replace(/([aeioué])y/g, \"$1Y\");\n    if (DEBUG) {\n      console.log(\"handleYI: y after vowel: \" + result);\n    }\n    // i between vowels\n    var result = result.replace(/([aeioué])i([aeioué])/g, \"$1I$2\");\n    if (DEBUG) {\n      console.log(\"handleYI: i between vowels:\" + result);\n    }\n    return result;\n  }\n\n\n  // Determines R1 and R2; adapted from the French Porter Stemmer\n  markRegions(token) {\n    var r1, r2, len;\n\n    r1 = r2 = len = token.length;\n\n    // R1 is the region after the first non-vowel following a vowel,\n    for (var i = 0; i < len - 1 && r1 == len; i++) {\n      if (isVowel(token[i]) && !isVowel(token[i + 1])) {\n        r1 = i + 2;\n      }\n    }\n    // Or is the null region at the end of the word if there is no such non-vowel.\n\n    // R1 is adjusted such that the region before it contains at least 3 characters\n    if (r1 != len) {\n      // R1 is not null\n      if (r1 < 3) {\n        // Region before does not contain at least 3 characters\n        if (len > 3) {\n          r1 = 3;\n          // Now R1 contains at least 3 characters\n        }\n        else {\n          // It is not possible to make the region before long enough\n          r1 = len;\n        }\n      }\n    }\n\n    // R2 is the region after the first non-vowel following a vowel in R1\n    for (i = r1; i < len - 1 && r2 == len; i++) {\n      if (isVowel(token[i]) && !isVowel(token[i + 1])) {\n        r2 = i + 2;\n      }\n    }\n    // Or is the null region at the end of the word if there is no such non-vowel.\n\n    if (DEBUG) {\n      console.log(\"Regions r1 = \" + r1 + \" r2 = \" + r2);\n    }\n\n    this.r1 = r1;\n    this.r2 = r2;\n  }\n\n\n  prelude(word) {\n    var result = this.replaceAccentedCharacters(word);\n    result = this.handleYI(result);\n    this.markRegions(result);\n    if (DEBUG) {\n      console.log(\"Prelude: \" + result);\n    }\n    return result;\n  }\n\n  \n  // (1b) en   ene => delete if in R1 and preceded by a valid en-ending, and then undouble the ending\n  // Define a valid en-ending as a non-vowel, and not gem.\n  // Define undoubling the ending as removing the last letter if the word ends kk, dd or tt.\n  step1b(word, suffixes) {\n    var result = word;\n    \n    var match = result.endsinArr(suffixes);\n    if (match != \"\") {\n      var pos = result.length - match.length;\n      if (pos >= this.r1) {\n        // check the character before the matched en/ene AND check for gem\n        if (!isVowel(result[pos - 1]) && result.substr(pos - 3, 3) !== \"gem\") {\n          // delete\n          result = result.removeSuffix(match.length);\n          // Undouble the ending\n          result = result.undoubleEnding();\n        }\n      }\n    }\n    if (DEBUG) {\n      console.log(\"step 1b: \" + result);\n    }\n    return result;\n  }\n\n  \n  step1(word) {\n    var result = word;\n    // (1a) heden => replace with heid if in R1\n    if (result.endsin(\"heden\") && result.length - 5 >= this.r1) {\n      result = result.removeSuffix(5);\n      result += \"heid\";\n    }\n    if (DEBUG) {\n      console.log(\"step 1a: \" + result);\n    }\n\n    result = this.step1b(result, [\"en\", \"ene\"]);\n\n    // (1c) s   se => delete if in R1 and preceded by a valid s-ending\n    // Define a valid s-ending as a non-vowel other than j.\n    var match = result.endsinArr([\"se\", \"s\"]);\n    if (match != \"\") {\n      var pos = result.length - match.length;\n      if (pos >= this.r1) {\n        // check the character before the matched s/se\n        // HtD: if there is a s before the s/se the suffix should stay\n        //if (!isVowel(result[pos - 1]) && result[pos - 1] != \"j\") {\n        if (!isVowel(result[pos - 1]) && !result.match(/[js]se?$/)) {\n          result = result.removeSuffix(match.length);\n        }\n      }  \n    }\n    if (DEBUG) {\n      console.log(\"step 1c: \" + result);\n    }\n    return result;\n  }\n\n\n  // Delete suffix e if in R1 and preceded by a non-vowel, and then undouble the ending\n  step2(word) {\n    var result = word;\n    if (result.endsin(\"e\") && this.r1 < result.length) {\n      if (result.length > 1 && !isVowel(result[result.length - 2])) {\n        // Delete\n        result = result.removeSuffix(1);\n        this.suffixeRemoved = true;\n        // Undouble the ending\n        result = result.undoubleEnding();\n      }\n    }\n\n\n    if (DEBUG) {\n      console.log(\"step2: \" + result);\n    }\n    return result;\n  }\n\n\n  // Step 3a: heid => delete heid if in R2 and not preceded by c, and treat a preceding en as in step 1(b)\n  step3a(word) {\n    var result = word;\n    if (result.endsin(\"heid\") && result.length - 4 >= this.r2 && result[result.length - 5] != \"c\") {\n      // Delete\n      result = result.removeSuffix(4);\n      // Treat a preceding en as in step 1b\n      result = this.step1b(result, [\"en\"]);\n    }\n    if (DEBUG) {\n      console.log(\"step 3a: \" + result);\n    }\n    return result;\n  }\n\n  \n  // d suffixes: Search for the longest among the following suffixes, and perform the action indicated.\n  step3b(word) {\n    var result = word;\n\n    // end   ing => delete if in R2; if preceded by ig, delete if in R2 and not preceded by e, otherwise undouble the ending\n    var suf = \"\";\n    if (suf = result.endsinArr([\"end\", \"ing\"])) {\n      if ((result.length - 3) >= this.r2) {\n        // Delete suffix\n        result = result.removeSuffix(3);\n        //this.regions(result);\n        if (result.endsin(\"ig\") && (result.length - 2 >= this.r2) && result[result.length - 3] != \"e\") {\n          // Delete suffix\n          result = result.removeSuffix(2);\n        }\n        else {\n          result = result.undoubleEnding();\n        }\n      }\n    }\n      \n    // ig => delete if in R2 and not preceded by e\n    if (result.endsin(\"ig\") && this.r2 <= result.length - 2 && result[result.length - 3] != \"e\") {\n      result = result.removeSuffix(2);\n    }\n        \n    // lijk => delete if in R2, and then repeat step 2\n    if (result.endsin(\"lijk\") && this.r2 <= result.length - 4) {\n      result = result.removeSuffix(4);\n      // repeat step 2\n      result = this.step2(result);\n    }\n\n    // baar => delete if in R2\n    if (result.endsin(\"baar\") && this.r2 <= result.length - 4) {\n      result = result.removeSuffix(4);\n    }    \n\n    // bar => delete if in R2 and if step 2 actually removed an e\n    if (result.endsin(\"bar\") && this.r2 <= result.length - 3 && this.suffixeRemoved) {\n      result = result.removeSuffix(3);\n    }    \n    \n    if (DEBUG) {\n      console.log(\"step 3b: \" + result);\n    }\n    return result;\n  }\n\n  \n  // undouble vowel => If the words ends CVD, where C is a non-vowel,\n  // D is a non-vowel other than I, and V is double a, e, o or u,\n  // remove one of the vowels from V (for example, maan -> man, brood -> brod)\n  step4(word) {\n    var result = word;\n    \n    if (result.match(/[bcdfghjklmnpqrstvwxz](aa|ee|oo|uu)[bcdfghjklmnpqrstvwxz]$/)) {\n      result = result.substr(0, result.length - 2) + result[result.length - 1];\n    }\n    \n    if (DEBUG) {\n      console.log(\"step4: \" + result);\n    }\n    return result;\n  }\n\n  // Turn I and Y back into lower case.\n  postlude(word) {\n    return word.toLowerCase();\n  }\n\n  stem(word) {\n    return this.postlude(this.step4(this.step3b(this.step3a(this.step2(this.step1(this.prelude(word)))))));\n  }\n}\n\n\nmodule.exports = new PorterStemmer();\n"]},"metadata":{},"sourceType":"script"}