<html>
<head>
    <meta charset="UTF-8">
    <script language="javascript" type="text/javascript" src="libraries/p5.js"></script>
    <script language="javascript" src="libraries/p5.dom.js"></script>
    <script language="javascript" src="libraries/p5.sound.js"></script>
    <script language="javascript" type="text/javascript" src="sketch.js"></script>
    <script language="javascript" type="text/javascript" src="Player.js"></script>
    <script language="javascript" type="text/javascript" src="Line.js"></script>
    <script language="javascript" type="text/javascript" src="Level.js"></script>
    <script language="javascript" type="text/javascript" src="LevelSetupFunction.js"></script>
    <script language="javascript" type="text/javascript" src="Brain.js"></script>
    <script language="javascript" type="text/javascript" src="Population.js"></script>
    <script language="javascript" type="text/javascript" src="Coin.js"></script>
    <style>
        body {
            background-color: rgb(30,30,30);
            color: white;
        }
    </style>
    <script>
        // function dispatchKeyDown(key) {
        //     console.log(key)
        //     var event = new KeyboardEvent('keydown', {
        //         key: key
        //     });
        //     document.dispatchEvent(event);
        // }

        // function dispatchKeyUp(key) {
        //     console.log(key)
        //     var event = new KeyboardEvent('keyup', {
        //         key: key
        //     });
        //     document.dispatchEvent(event);
        // }


        // document.addEventListener('keydown', function (e) {
        //     console.log('Key: ' + e.key + '; alt pressed: ' + e.altKey + '; ctrl pressed: ' + e.ctrlKey);
        // });

        Podium = {};

        Podium.keydown = function(k) {
            var oEvent = document.createEvent('KeyboardEvent');

            // Chromium Hack
            Object.defineProperty(oEvent, 'keyCode', {
                        get : function() {
                            return this.keyCodeVal;
                        }
            });     
            Object.defineProperty(oEvent, 'which', {
                        get : function() {
                            return this.keyCodeVal;
                        }
            });     

            if (oEvent.initKeyboardEvent) {
                oEvent.initKeyboardEvent("keydown", true, true, document.defaultView, k, k, "", "", false, "");
            } else {
                oEvent.initKeyEvent("keydown", true, true, document.defaultView, false, false, false, false, k, 0);
            }

            oEvent.keyCodeVal = k;

            if (oEvent.keyCode !== k) {
                alert("keyCode mismatch " + oEvent.keyCode + "(" + oEvent.which + ")");
            }

            document.body.dispatchEvent(oEvent);
        }

        Podium.keyup = function(k) {
            var oEvent = document.createEvent('KeyboardEvent');

            // Chromium Hack
            Object.defineProperty(oEvent, 'keyCode', {
                        get : function() {
                            return this.keyCodeVal;
                        }
            });     
            Object.defineProperty(oEvent, 'which', {
                        get : function() {
                            return this.keyCodeVal;
                        }
            });     

            if (oEvent.initKeyboardEvent) {
                oEvent.initKeyboardEvent("keyup", true, true, document.defaultView, k, k, "", "", false, "");
            } else {
                oEvent.initKeyEvent("keyup", true, true, document.defaultView, false, false, false, false, k, 0);
            }

            oEvent.keyCodeVal = k;

            if (oEvent.keyCode !== k) {
                alert("keyCode mismatch " + oEvent.keyCode + "(" + oEvent.which + ")");
            }

            document.body.dispatchEvent(oEvent);
        }

    </script>
</head>

<body>
<center>
    Not by me, forked from <a href="https://github.com/Code-Bullet/Jump-King">code bullet</a>
    <div id="canvas"></div>
    <div style="display: grid; grid-template-columns: auto auto auto; height: 10vh;">
        <button onmousedown="Podium.keydown(37)" onmouseup="Podium.keyup(37)">⇦</button>
        <button onmousedown="Podium.keydown(32)" onmouseup="Podium.keyup(32)">⇧</button>
        <button onmousedown="Podium.keydown(39)" onmouseup="Podium.keyup(39)">⇨</button>
    </div>
</center>

</body>
</html>
